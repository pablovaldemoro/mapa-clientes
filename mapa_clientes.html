<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <title>Mapa de Clientes – España</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    html, body { height:100%; margin:0; font-family: system-ui, -apple-system, "Segoe UI", Arial; }
    header { background:#222; color:#fff; padding:10px 14px; }
    header h1 { margin:0; font-size:18px; }
    #map { height: calc(100% - 56px); }
    .legend {
      position:absolute; bottom:12px; left:12px; background:#fff; padding:8px 10px;
      border-radius:6px; box-shadow:0 1px 4px rgba(0,0,0,.3); font-size:12px; z-index:1000;
    }
    .legend-item { display:flex; align-items:center; margin:4px 0; }
    .legend-color { width:12px; height:12px; border-radius:50%; margin-right:6px; }
  </style>
</head>
<body>
<header>
  <h1>Mapa de Clientes – España</h1>
</header>
<div id="map"></div>
<div class="legend">
  <strong>Leyenda</strong>
  <div class="legend-item"><div class="legend-color" style="background:#1f77b4;"></div>Perfume and Cosmetic</div>
  <div class="legend-item"><div class="legend-color" style="background:#d62728;"></div>Food and Beverage</div>
  <div class="legend-item"><div class="legend-color" style="background:#2ca02c;"></div>Detergence and Chemistry</div>
  <div class="legend-item"><div class="legend-color" style="background:#9467bd;"></div>Nutrition and Pharma</div>
</div>

<script>
// CLIENTES
const CLIENTES = [
  {empresa:"Aguardientes de Galicia", municipio:"Vedra", sector:"Food and Beverage"},
  {empresa:"Alcoholera Catalana", municipio:"Santa Margarida i Els Monjos", sector:"Detergence and Chemistry"},
  {empresa:"Alcoholes del Sur", municipio:"Córdoba", sector:"Food and Beverage"},
  {empresa:"Alcoholes Oliva", municipio:"Barcelona", sector:"Food and Beverage"},
  {empresa:"Alcoprodis", municipio:"Aldaia", sector:"Detergence and Chemistry"},
  {empresa:"Antonio Nadal", municipio:"Marratxí", sector:"Food and Beverage"},
  {empresa:"Antonio Puig", municipio:"Barcelona", sector:"Perfume and Cosmetic"},
  {empresa:"Bacardi", municipio:"Mollet del Valles", sector:"Food and Beverage"},
  {empresa:"Bardinet", municipio:"Gélida", sector:"Food and Beverage"},
  {empresa:"Beam Spain", municipio:"Valverde de Majano", sector:"Food and Beverage"},
  {empresa:"Beiesdorf", municipio:"Tres Cantos", sector:"Perfume and Cosmetic"},
  {empresa:"Benito Parraga", municipio:"Murcia", sector:"Nutrition and Pharma"},
  {empresa:"Berioska", municipio:"Cheste", sector:"Perfume and Cosmetic"},
  {empresa:"Berkem", municipio:"Quart de Poblet", sector:"Food and Beverage"},
  {empresa:"Beveland", municipio:"Sant Joan de Les Fonts", sector:"Food and Beverage"},
  {empresa:"Biosearch", municipio:"La Jonquera", sector:"Nutrition and Pharma"},
  {empresa:"Fundador", municipio:"Jerez de la Frontera", sector:"Food and Beverage"},
  {empresa:"Osborne", municipio:"El Puerto de Santa Maria", sector:"Food and Beverage"},
  {empresa:"Sanviver", municipio:"Fuenlabrada", sector:"Food and Beverage"},
  {empresa:"Williams and Humbert", municipio:"Jerez de la Frontera", sector:"Food and Beverage"},
  {empresa:"Cruz Conde", municipio:"Montilla", sector:"Food and Beverage"},
  {empresa:"Briseis", municipio:"Almería", sector:"Perfume and Cosmetic"},
  {empresa:"Caves da Montanha", municipio:"Anadia", sector:"Food and Beverage"},
  {empresa:"Cogrami Canarias", municipio:"Ingenio", sector:"Food and Beverage"},
  {empresa:"Colep", municipio:"Vale de Cambra", sector:"Perfume and Cosmetic"},
  {empresa:"Coty", municipio:"Granollers", sector:"Perfume and Cosmetic"},
  {empresa:"De Luque", municipio:"Jerez de la Frontera", sector:"Food and Beverage"},
  {empresa:"De Ruy", municipio:"Antequera", sector:"Perfume and Cosmetic"},
  {empresa:"Destilerias Compostela", municipio:"Cotimunde", sector:"Food and Beverage"},
  {empresa:"Destilerias Espronceda", municipio:"Almendralejo", sector:"Food and Beverage"},
  {empresa:"Joaquin Alonso", municipio:"Atarfe", sector:"Food and Beverage"},
  {empresa:"Destilerias La Huertana", municipio:"Alcantarilla", sector:"Food and Beverage"},
  {empresa:"DZ Licores", municipio:"Cartagena", sector:"Food and Beverage"},
  {empresa:"Ecovinal", municipio:"Sartaguda", sector:"Food and Beverage"},
  {empresa:"ESES", municipio:"Zuera", sector:"Detergence and Chemistry"},
  {empresa:"Fernando Ribeiro Abreu", municipio:"Alcanena", sector:"Food and Beverage"},
  {empresa:"Francisco Aragon", municipio:"Molina de Segura", sector:"Perfume and Cosmetic"},
  {empresa:"Gonzalez Byass", municipio:"Jerez de la Frontera", sector:"Food and Beverage"},
  {empresa:"Goyval Vinagres", municipio:"Madrigueras", sector:"Food and Beverage"},
  {empresa:"Hijo de Rafael Reyes", municipio:"Rute", sector:"Food and Beverage"},
  {empresa:"Hugworld International Distribution", municipio:"Toledo", sector:"Perfume and Cosmetic"},
  {empresa:"Iberalcohol", municipio:"Valdemoro", sector:"Detergence and Chemistry"},
  {empresa:"J Carranca Redondo", municipio:"Lousa", sector:"Food and Beverage"},
  {empresa:"Jose Estevez", municipio:"Jerez de la Frontera", sector:"Food and Beverage"},
  {empresa:"JR Sabater", municipio:"Murcia", sector:"Food and Beverage"},
  {empresa:"Betamadrileño", municipio:"Getafe", sector:"Nutrition and Pharma"},
  {empresa:"Laboratorios Maverick", municipio:"San Fernando de Henares", sector:"Perfume and Cosmetic"},
  {empresa:"Laboratorios Vinfer", municipio:"Albacete", sector:"Detergence and Chemistry"},
  {empresa:"Licores Sinc", municipio:"Alcoy", sector:"Food and Beverage"},
  {empresa:"Luis Caballero", municipio:"Cádiz", sector:"Food and Beverage"},
  {empresa:"Manuel Vieira", municipio:"Torres Novas", sector:"Detergence and Chemistry"},
  {empresa:"Marie Brizard", municipio:"Zizurkil", sector:"Food and Beverage"},
  {empresa:"Miguel Torres", municipio:"Vilafranca del Penedés", sector:"Food and Beverage"},
  {empresa:"Mixer and Pack", municipio:"Meco", sector:"Perfume and Cosmetic"},
  {empresa:"Aragonesa de Disolventes", municipio:"Zaragoza", sector:"Detergence and Chemistry"},
  {empresa:"Disolventes y Alcoholes del Ebro", municipio:"Zaragoza", sector:"Detergence and Chemistry"},
  {empresa:"Parque Logistico Carmona", municipio:"Carmona", sector:"Food and Beverage"},
  {empresa:"Pernod Ricard España", municipio:"Padrón", sector:"Food and Beverage"},
  {empresa:"Productos Capilares L´Oreal", municipio:"Villalonquejar", sector:"Perfume and Cosmetic"},
  {empresa:"Quimi Romar", municipio:"Náquera", sector:"Detergence and Chemistry"},
  {empresa:"Rives", municipio:"El Puerto de Santa Maria", sector:"Food and Beverage"},
  {empresa:"SAEQSA", municipio:"Alfajarín", sector:"Detergence and Chemistry"},
  {empresa:"Sanofi Aventis", municipio:"Riells i Viabrea", sector:"Nutrition and Pharma"},
  {empresa:"Stockmeier", municipio:"Sentmenat", sector:"Detergence and Chemistry"},
  {empresa:"Tecnoquimica Extremeña", municipio:"Guareña", sector:"Detergence and Chemistry"},
  {empresa:"Valenalcol", municipio:"Chiva", sector:"Detergence and Chemistry"},
  {empresa:"Vinagrerias Riojanas", municipio:"Logroño", sector:"Food and Beverage"},
  {empresa:"Vinagres Parras", municipio:"Torrijos", sector:"Food and Beverage"},
  {empresa:"Vittone 1842", municipio:"Vilamalla", sector:"Food and Beverage"},
  {empresa:"Zoco Pharmaceutical", municipio:"Dicastillo", sector:"Nutrition and Pharma"}
];

// Coordenadas estimadas
const MUNICIPIO_COORDS = {
  "Barcelona": {lat:41.3879, lon:2.1699},
  "Córdoba": {lat:37.8847, lon:-4.7791},
  "Jerez de la Frontera": {lat:36.6864, lon:-6.1360},
  "El Puerto de Santa Maria": {lat:36.5939, lon:-6.2320},
  "Murcia": {lat:37.9922, lon:-1.1307},
  "Fuenlabrada": {lat:40.2842, lon:-3.7942},
  "Valdemoro": {lat:40.1920, lon:-3.6789},
  "Zaragoza": {lat:41.6490, lon:-0.8891},
  "Logroño": {lat:42.4663, lon:-2.4487},
  "Toledo": {lat:39.8628, lon:-4.0273},
  "Almería": {lat:36.8340, lon:-2.4620},
  "Albacete": {lat:38.9943, lon:-1.8564},
  "Getafe": {lat:40.3080, lon:-3.7320},
  "Alcoy": {lat:38.7069, lon:-0.4733},
  "Cádiz": {lat:36.5271, lon:-6.2886},
  "Antequera": {lat:37.0194, lon:-4.5625},
  "Almendralejo": {lat:38.6496, lon:-6.3992},
  "Burgos": {lat:42.3430, lon:-3.6969},
  "Cartagena": {lat:37.6257, lon:-0.9962},
  "Guareña": {lat:38.9750, lon:-6.5028},
  "Carmona": {lat:37.4738, lon:-5.6020},
  "Getafe": {lat:40.3080, lon:-3.7320},
  "Cheste": {lat:39.4911, lon:-0.6050},
  "Quart de Poblet": {lat:39.4923, lon:-0.4539},
  "Aldaia": {lat:39.4569, lon:-0.4563},
  "Alcantarilla": {lat:38.0403, lon:-1.2266},
  "Atarfe": {lat:37.2724, lon:-3.6050},
  "Molina de Segura": {lat:38.0333, lon:-1.1780},
  "Madrigueras": {lat:38.9150, lon:-1.4500},
  "Rute": {lat:37.4101, lon:-4.3908},
  "Montilla": {lat:37.5454, lon:-4.6715},
  "Alcoy": {lat:38.7069, lon:-0.4733},
  "Albacete": {lat:38.9943, lon:-1.8564},
  "Mollet del Valles": {lat:41.5388, lon:2.2600},
  "Sant Joan de les Fonts": {lat:42.1323, lon:2.6435},
  "Vilafranca del Penedés": {lat:41.3500, lon:1.6970},
  "Sentmenat": {lat:41.5900, lon:2.0490},
  "Riells i Viabrea": {lat:41.7880, lon:2.5070},
  "Gélida": {lat:41.3900, lon:1.8140},
  "Alfajarin": {lat:41.6110, lon:-0.7820},
  "Náquera": {lat:39.6300, lon:-0.4000},
  "Chiva": {lat:39.4450, lon:-0.7430},
  "Torrijos": {lat:39.9400, lon:-4.3430},
  "Padrón": {lat:42.7330, lon:-8.6300},
  "Vilamalla": {lat:42.3030, lon:2.9510},
  "Zizurkil": {lat:43.1930, lon:-2.0450},
  "Alcalá de Henares": {lat:40.4810, lon:-3.3640},
  "San Fernando de Henares": {lat:40.4600, lon:-3.5190},
  "Lousã": {lat:40.1550, lon:-8.1930},
  "Anadia": {lat:40.4167, lon:-8.3233},
  "Vale de Cambra": {lat:40.8390, lon:-8.1570},
  "Torres Novas": {lat:39.4787, lon:-8.2338},
  "Ingenio": {lat:27.9233, lon:-15.4481}
  // Puedes añadir más si quieres más precisión
};

const map = L.map('map').setView([39.5, -4.0], 5);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 18 }).addTo(map);

const colorPorSector = s => ({
  "Perfume and Cosmetic":"#1f77b4",
  "Food and Beverage":"#d62728",
  "Detergence and Chemistry":"#2ca02c",
  "Nutrition and Pharma":"#9467bd"
}[s] || "#777");

CLIENTES.forEach((c, i) => {
  const muni = c.municipio.trim();
  const coord = MUNICIPIO_COORDS[muni];
  if (!coord) {
    console.warn("Sin coordenadas:", muni);
    return;
  }
  const mk = L.circleMarker([coord.lat, coord.lon], {radius:6, color: colorPorSector(c.sector), fillColor: colorPorSector(c.sector), fillOpacity:0.9}).addTo(map);
  mk.bindPopup(`<b>${c.empresa}</b><br>${c.municipio}<br>${c.sector}`);
});
</script>
</body>
</html>
